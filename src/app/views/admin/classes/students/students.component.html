<div class="position-relative">
  <ngx-spinner [fullScreen]="false" name="student-spinner" bdColor="rgba(255, 255, 255, .8)" size="medium"
    color="#343a40" type="ball-scale-ripple">
    <p class="text-dark mt-5 text-bold">Chargement des étudiants ...</p>
  </ngx-spinner>
  <div *ngIf="dataLoaded | async">
    <div class="form mb-3 w-50">
      <label class="form-label">Année scolaire</label>
      <select class="form-control" id="allocation-algorithm" [(ngModel)]="schoolYearId" (change)="onSchoolYearChange()">
        <option *ngFor="let schoolYear of schoolYears" [value]="schoolYear.id">{{schoolYear.description}}</option>
      </select>
    </div>
    <div class="row">
      <div class="col-md-6">
        <div class="card" *ngIf="selectedSchoolyear">
          <div class="card-header border-0">
            <div class="card-title">
              <span class="badge badge-danger mr-1">{{subclass.name}}</span>
              <span class="badge badge-secondary mr-1">{{subclass.description}}</span>
              <span class="badge badge-info">{{selectedSchoolyear.description}}</span>
              <span class="text-bold text-sm float-right">Liste des étudiants</span>
            </div>
          </div>
          <div class="card-body table-responsive p-0">
            <table *ngIf="students.length > 0; else noStudentAlert"
              class="table table-striped table-valign-middle table-sm">
              <thead>
                <tr>
                  <th></th>
                  <th>Prénoms</th>
                  <th>Noms</th>
                  <th>Statut</th>
                  <th>Description</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let student of students">
                  <td>
                    <img src="assets/img/user.jpg" alt="Product 1" class="img-circle img-size-32 mr-2">
                  </td>
                  <td class="text-capitalize">{{ student.first_name }}</td>
                  <td class="text-capitalize">
                    {{ student.last_name }}
                  </td>
                  <td>
                    {{student.is_remote ? 'Distanciel' : 'Présenciel'}}
                    <i *ngIf="student.is_remote" class="fas fa-desktop text-sm ml-1"></i>
                  </td>
                  <td>
                    {{ student.description ? student.description : ' --- '}}
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
      <div class="col-md-6">

      </div>
    </div>
    <ng-template #noStudentAlert>
      <div class="alert alert-warning text-center mb-0" role="alert">
        <i class="fas fa-exclamation-circle"></i>
        <b> Aucun étudiant dans cette classe.</b>
      </div>
    </ng-template>
  </div>

</div>
